<!DOCTYPE html>
<html>
<head>
	<title>Widget</title>
	<style type="text/css">
		@font-face {
			font-family: space-grotesk;
			src: url(./fonts/SpaceGrotesk-Regular.ttf);
		}
		*{
			margin:0;
			padding: 0;
			box-sizing: border-box;
			font-family: space-grotesk;
		}
		body{
			width: 100%;
			position: relative;
		}
		.triangulo{
			position: absolute;			
			top: 31px;
			left: 0px;
			width: 70px;
			z-index: 2;
			animation: mover_caja 2s forwards;
			animation-timing-function: linear;
			animation-play-state: paused;
		}
		main{			
			width: 100000px;
			height: 60px;
			background: #0fa89c;
			color: #fff;
			overflow: hidden;
			z-index: 1;
			position: absolute;
			top: 40px;
			left: 0;
			animation: mover_caja 2s forwards;
			animation-timing-function: linear;
			animation-play-state: paused;
		}
		@keyframes mover_caja {
			0%{
				transform: translateY(0px);
				opacity: 1;
			}
			99.9%{
				transform: translateY(+100px);
				opacity: 1;				
			}
			100% {
				transform: translateY(+100px);
				opacity:0;
			}
		}
		h1{
			font-size: 30px;
			line-height: 60px;
			letter-spacing: 1px;
			word-spacing: 2px;
			font-weight: 400;
			white-space: normal;
  			overflow: visible;
		}
		#movimiento{
			top: 0;
			position: absolute;
			left: 0;			
			animation: mover_texto 100s forwards;
			animation-timing-function: linear;
		}
		@keyframes mover_texto{
			0%{
				transform: translateX(1280px);
				opacity: 1;
			}
			99.9999%{
				transform: translateX(-100%);
				opacity: 1;				
			}
			100% {
				opacity:0;
			}
		}
	</style>
</head>
<body>
	<img class="triangulo" src="img/triangulo-2.png">
	<main>
		<h1 id="movimiento"></h1>
	</main>
</body>
<script type="text/javascript">
	const titulo = document.querySelector('h1');
	const movimiento = document.querySelector('#movimiento');
	const triangulo = document.querySelector('.triangulo');
	const mainDiv = document.querySelector('main');

	const tituloText = 'Spécial Rentrée - Le retour à l\'école se fait en douceur grâce à nos recommandations de films et de séries! | Des plus connus à ceux passés inaperçus, vous présente les jeux vidéo qui ont été adaptés au cinéma et à la télévision. | Lequel préférez-vous ? chaîne fêter Pâques | Bleiben Sie über Filmveröffentlichungen auf dem Laufenden, die Sie von der Couch aus ansehen können Archäologen Anlässlich | Wenn dir „Der Super Mario Bros. Film” gefallen hat, empfehlen wir dir... größten';
	titulo.textContent = tituloText;
	
	const tituloWidth = titulo.offsetWidth;
	console.log(`The width of the h1 text is ${tituloWidth}px`);
	const animationDuration = (tituloWidth * 20/678)*1000; // Adjust this value to change the animation speed
	console.log(`Duration is ${animationDuration}ms`);
	movimiento.style.animationDuration = `${animationDuration}ms`;
	//titulo.style.width = `${tituloWidth}px`;
	
	triangulo.addEventListener('animationstart', () => {
		console.log(`${new Date().toLocaleTimeString()} - Caja Animation started`);
	});

	triangulo.addEventListener('animationend', () => {
		console.log(`${new Date().toLocaleTimeString()} - Caja Animation ended`);
	});

	movimiento.addEventListener('animationstart', () => {
		console.log(`${new Date().toLocaleTimeString()} - Texto Animation started`);
	});

	movimiento.addEventListener('animationend', () => {
		console.log(`${new Date().toLocaleTimeString()} - Texto Animation ended`);
		triangulo.style.animationPlayState = "running";
		mainDiv.style.animationPlayState = "running";
	});
</script>
</html>
